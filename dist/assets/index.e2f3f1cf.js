var E=Object.defineProperty;var P=(n,r,t)=>r in n?E(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t;var l=(n,r,t)=>(P(n,typeof r!="symbol"?r+"":r,t),t);const L=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=t(e);fetch(e.href,i)}};L();class m{constructor(r,t,s,e){l(this,"templateElement");l(this,"hostElement");l(this,"element");this.templateElement=document.getElementById(r),this.hostElement=document.getElementById(t);const i=document.importNode(this.templateElement.content,!0);this.element=i.firstElementChild,e&&(this.element.id=e),this.attach(s)}attach(r){this.hostElement.insertAdjacentElement(r?"afterbegin":"beforeend",this.element)}}function u(n){let r=!0;return n.required&&(r=r&&n.value.toString().trim().length!==0),n.minLength!=null&&typeof n.value=="string"&&(r=r&&n.value.length>n.minLength),n.maxLength!=null&&typeof n.value=="string"&&(r=r&&n.value.length<n.maxLength),n.min!=null&&typeof n.value=="number"&&(r=r&&n.value>=n.min),n.max!=null&&typeof n.value=="number"&&(r=r&&n.value<=n.max),r}function a(n,r,t){const s=t.value;return{configurable:!0,enumerable:!1,get(){return s.bind(this)}}}var c=(n=>(n[n.Active=0]="Active",n[n.Finished=1]="Finished",n))(c||{});class _{constructor(r,t,s,e,i){this.id=r,this.title=t,this.description=s,this.people=e,this.status=i}}class O{constructor(){l(this,"listeners",[])}addListener(r){this.listeners.push(r)}}const v=class extends O{constructor(){super();l(this,"projects",[])}static getInstance(){return this.instance?this.instance:(this.instance=new v,this.instance)}addProject(t,s,e){const i=new _(Math.random().toString(),t,s,e,c.Active);this.projects.push(i),this.updateListeners()}moveProject(t,s){const e=this.projects.find(i=>i.id===t);e&&e.status!==s&&(e.status=s,this.updateListeners())}updateListeners(){for(const t of this.listeners)t(this.projects.slice())}};let p=v;l(p,"instance");const h=p.getInstance();var H=Object.defineProperty,q=Object.getOwnPropertyDescriptor,x=(n,r,t,s)=>{for(var e=s>1?void 0:s?q(r,t):r,i=n.length-1,o;i>=0;i--)(o=n[i])&&(e=(s?o(r,t,e):o(e))||e);return s&&e&&H(r,t,e),e};class g extends m{constructor(){super("project-input","app",!0,"user-input");l(this,"titleInputElement");l(this,"descriptionInputElement");l(this,"peopleInputElement");this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const t=this.titleInputElement.value,s=this.descriptionInputElement.value,e=this.peopleInputElement.value,i={value:t,required:!0},o={value:s,required:!0,minLength:5},j={value:+e,required:!0,min:1,max:5};if(!u(i)||!u(o)||!u(j)){alert("Invalid input, please try again!");return}else return[t,s,+e]}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(t){t.preventDefault();const s=this.gatherUserInput();if(Array.isArray(s)){const[e,i,o]=s;h.addProject(e,i,o),this.clearInputs()}}}x([a],g.prototype,"submitHandler",1);var C=Object.defineProperty,D=Object.getOwnPropertyDescriptor,w=(n,r,t,s)=>{for(var e=s>1?void 0:s?D(r,t):r,i=n.length-1,o;i>=0;i--)(o=n[i])&&(e=(s?o(r,t,e):o(e))||e);return s&&e&&C(r,t,e),e};class y extends m{constructor(t,s){super("single-project",t,!1,s.id);l(this,"project");this.project=s,this.configure(),this.renderContent()}get Persons(){return this.project.people===1?"1 person ":`${this.project.people} persons `}dragStartHandler(t){t.dataTransfer.setData("text/plain",this.project.id),t.dataTransfer.effectAllowed="move"}dragEndHandler(t){}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.Persons+" assigned.",this.element.querySelector("p").textContent=this.project.description}}w([a],y.prototype,"dragStartHandler",1);var S=Object.defineProperty,A=Object.getOwnPropertyDescriptor,f=(n,r,t,s)=>{for(var e=s>1?void 0:s?A(r,t):r,i=n.length-1,o;i>=0;i--)(o=n[i])&&(e=(s?o(r,t,e):o(e))||e);return s&&e&&S(r,t,e),e};class d extends m{constructor(t){super("project-list","app",!1,`${t}-projects`);l(this,"assignedProjects");this.type=t,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(t){t.dataTransfer&&t.dataTransfer.types[0]==="text/plain"&&(t.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(t){t.preventDefault();const s=t.dataTransfer.getData("text/plain");h.moveProject(s,this.type==="active"?c.Active:c.Finished)}dragLeaveHandler(t){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),h.addListener(t=>{const s=t.filter(e=>(e.status,c.Active,this.type==="active"?e.status===c.Active:e.status===c.Finished));this.assignedProjects=s,this.renderProjects()})}renderContent(){const t=`${this.type}-projects-list`;this.element.querySelector("ul").id=t,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" Projects"}renderProjects(){const t=document.getElementById(`${this.type}-projects-list`);t.innerHTML="";for(const s of this.assignedProjects)new y(this.element.querySelector("ul").id,s)}}f([a],d.prototype,"dragOverHandler",1);f([a],d.prototype,"dropHandler",1);f([a],d.prototype,"dragLeaveHandler",1);new g;new d("active");new d("finished");
